// once config has been applied
getConfigFile.done(function() {
	// create the file uploader
	formOptions.dxfTime = {
		"type": "generic",
		"noParse": true,
		"template": "<label for='dxf-file-picker'><span data-form-el-type='file' class='form-control btn-default form-file-picker job-file-upload' data-toggle='tooltip' data-placement='bottom' title='Drag your DXF here, or click the button'>Upload DXF<input type='file' id='dxf-file-picker'></span></label>",
		"onRender": function() {
			// when the file is chosen
			$('#dxf-file-picker').change(function logData(data) {
				var file = $(this).get(0).files[0];
				var read = new FileReader();
				read.readAsBinaryString(file);
				read.onloadend = function transferFile() {
					// send it to the backend
					socketSend({"action": "send_dxf", "dxf_data": read.result});
				}
				// start a loader
				NProgress.start();
				acceptedAPIs.dxf_estimate = [function writeEstimate(data){
					NProgress.done();
					$('.job-time-estimate').val(data.time);
				}]
			});
		}
	}
	renderForm();
});
